import{a as k,b as x,c as L,d as E,e as N,f as I,g as T,h as W}from"./chunk-OAWNDA6B.js";import{b as S,d as y,g as v,k as C}from"./chunk-KYKMVFTT.js";import"./chunk-EA6DTDFA.js";import{La as b,Pa as h,U as d,Ya as M,Za as t,_a as r,eb as p,fb as _,ha as g,ib as a,jb as w,kb as u,lb as c,mb as f,va as l}from"./chunk-4JMR74BS.js";import"./chunk-WMVSLYLA.js";function P(s,n){if(s&1&&(t(0,"div",11),a(1),r()),s&2){let i=_();l(),w(i.errorMessage())}}var D=class s{email=g("");password=g("");supabaseService=d(C);router=d(v);errorMessage=g(null);async signInWithEmail(){this.errorMessage.set(null);let n=await this.supabaseService.signInWithEmail({email:this.email(),password:this.password()});n.error?this.errorMessage.set("Error signing in: "+n.error.message):this.router.navigate(["/dashboard"])}async sendMagicLink(){this.errorMessage.set(null);let n=this.email();if(!n){this.errorMessage.set("Please enter your email to receive a magic link.");return}let{error:i}=await this.supabaseService.signIn(n);i?this.errorMessage.set("Error sending magic link: "+i.message):this.errorMessage.set("Magic link sent! Check your email.")}navigateToSignup(){this.router.navigate(["/signup"])}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=b({type:s,selectors:[["app-login"]],decls:16,vars:3,consts:[[1,"flex","justify-center","items-center","min-h-screen","bg-base-200"],[1,"w-full","max-w-md","p-8","shadow-lg","rounded-lg","bg-base-100"],[1,"text-2xl","font-bold","mb-6","text-center"],[1,"form-widget","flex","flex-col","gap-4",3,"ngSubmit"],["class","text-red-600 text-center mb-2",4,"ngIf"],["type","email","name","email","placeholder","Email","required","",1,"input","input-bordered","w-full",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Password","required","",1,"input","input-bordered","w-full",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","w-full"],["type","button",1,"btn","btn-outline","w-full",3,"click"],[1,"mt-4","text-center"],[1,"link","link-primary","cursor-pointer",3,"click"],[1,"text-red-600","text-center","mb-2"]],template:function(i,e){i&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Login"),r(),t(4,"form",3),p("ngSubmit",function(){return e.signInWithEmail()}),h(5,P,2,1,"div",4),t(6,"input",5),f("ngModelChange",function(o){return c(e.email,o)||(e.email=o),o}),r(),t(7,"input",6),f("ngModelChange",function(o){return c(e.password,o)||(e.password=o),o}),r(),t(8,"button",7),a(9,"Sign In"),r(),t(10,"button",8),p("click",function(){return e.sendMagicLink()}),a(11,"Send Magic Link"),r()(),t(12,"p",9),a(13,"Don't have an account? "),t(14,"a",10),p("click",function(){return e.navigateToSignup()}),a(15,"Sign Up"),r()()()()),i&2&&(l(5),M("ngIf",e.errorMessage()),l(),u("ngModel",e.email),l(),u("ngModel",e.password))},dependencies:[W,I,k,x,L,T,N,E,y,S],encapsulation:2})};export{D as LoginComponent};
